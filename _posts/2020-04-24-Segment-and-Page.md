---
layout: post
title: 操作系统原理-分页和分段(Page and Segment)
description: 今天复习到硬件安全的内容, 记录一下有关内容以免遗忘了
---

# 1. 背景

在在计算机中运行程序时, 操作系统会处理一系列的内存分配和调用. 但是在我们编写程序的时候并没有实际的考虑如何从内存中请求空间, 或者考虑请求那一部分的空间. 这是因为这样的操作都被OS分装了, 而不同的OS实现机制有可能存在不同. 但是他们的基本概念都应该和分页与分段有关. 

# 2. 分段
分段是一种存在于OS内部用于内存处理的技术. 将程序中出现的连续内存请求分装为逻辑上的一个整体, 然后通过某种映射到物理内存空间中去. 

## 2.1 背景
在管理物理内存时, 因为可能存在的碎片化问题(Fragments)一个程序的占用的内存空间很有可能物理上不连续. 但是程序员在程序开发过程中大多数情况下, 不需要考虑他们申请的虚拟内存空间是如何存在于物理内存中的. 
例如在一个c语言程序中调用多次调用`malloc`方法来创建数组, 这些数组有可能被分配到不同的物理空间中去. 但是开发者大多数情况下都不会考虑它们实际是如何保存的. 

## 2.2 特点

* 长度不固定. 
* 对于程序员来说可见, 甚至是为了帮助程序员开发采用的技术

# 3. 分页 

分页也是一种存在于OS内部用于内存处理的技术. 将固定大小的物理内存空间转化为一个整体, 所有对于内存空间的操作都会基于这个整体. 

## 2.1 背景
和Segment的背景类似, 但是更加偏向于OS内部管理, 因为如果不使用Page技术. 不同程序的Segment或者说占用的物理内存空间一定会导致碎片化. 如果当申请的空间大于现有的连续的物理空间, 那么OS要么整理现有的内存, 要么使用不连续的空间. 两种解决方案要么会导致内存使用的低效率, 要么降低对内存操作的效率. 

## 2.2 特点

* 长度固定. 
* 对于程序员来说不可见
* 存在内部碎片.


